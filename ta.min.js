function ta(){}ta.aroon={up:this.aroon_up,down:this.aroon_down,osc:this.aroon_osc},ta.median=async function(a,t){for(var n=[],r=t||a.length;r<=a.length;r++){var h=a.slice(r-t,r);h.sort(((a,t)=>a>t?-1:a<t?1:0)),n.push(h[Math.round(h.length/2)])}return n},ta.kmeans=async function(a,t){var n,r=[],h=[],s=[],e=!1,l=Math.round(a.length/(t+1));for(i=0;i<t;i++)h[i]=a[l*(i+1)];do{for(i=0;i<t;i++)r[i]=[];for(x=0;x<a.length;x++){var u=-1;for(y=0;y<t;y++){var o=Math.abs(h[y]-a[x]);(-1===u||o<=u)&&(u=o,n=y)}r[n].push(a[x])}for(s=h,x=0;x<t;x++){var c=0;for(y=0;y<r[x].length;y++)c+=r[x][y];var f=c/r[n].length;h[x]=f}for(x=0;x<t;x++)h[x]!==s[x]&&(e=!0)}while(e);return r},ta.normalize=async function(a,t){t=t||0;for(var n=await Math.max.apply(null,a.slice())*(1+t),r=await Math.min.apply(null,a.slice())*(1-t),h=[],s=0;s<a.length;s++)h.push(1-(n-a[s])/(n-r));return h},ta.denormalize=async function(a,t,n){n=n||0;for(var r=await Math.max.apply(null,a.slice())*(1+n),h=await Math.min.apply(null,a.slice())*(1-n),s=[],e=0;e<t.length;e++)s.push(h+t[e]*(r-h));return s},ta.mad=async function(a,t){for(var n=t||a.length,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=await this.median(s),i=s.map((a=>Math.abs(a-e[e.length-1])));i=await this.median(i),r.push(i[i.length-1])}return r},ta.aad=async function(a,t){for(var n=t||a.length,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=0,i=await this.sma(s,n);for(q in s)e+=Math.abs(s[q]-i[i.length-1]);r.push(e/n)}return r},ta.ssd=async function(a,t){for(var n=t||a.length,r=[],h=n;h<a.length;h++){var s=a.slice(h-n,h),e=await this.sma(s,n),i=0;for(let a in s)i+=(s[a]-e[e.length-1])**2;r.push(Math.sqrt(i))}return r},ta.rsi=async function(a,t){for(var n=t||14,r=[],h=a.slice(0,n),s=n,e=0,i=0;s<a.length;s++,e=0,i=0){h.push(a[s]);for(var l=1;l<h.length;l++)h[l]-h[l-1]<0?i+=Math.abs(h[l]-h[l-1]):e+=h[l]-h[l-1];var u=100-100/(1+e/n/(i/n));r.push(u),h.splice(0,1)}return r},ta.wrsi=async function(a,t){for(var n=t||14,r=[],h=[],s=[],e=1;e<a.length;e++)a[e]-a[e-1]<0?(s.push(Math.abs(a[e]-a[e-1])),h.push(0)):(s.push(0),h.push(a[e]-a[e-1]));s=await this.wsma(s,n),h=await this.wsma(h,n);for(let a in s)r.push(100-100/(1+h[a]/s[a]));return r},ta.tsi=async function(a,t,n,r){for(var h=t||25,s=n||13,e=r||13,i=[],l=[],u=[],o=[],c=1;c<a.length;c++)i.push(a[c]-a[c-1]),l.push(Math.abs(a[c]-a[c-1]));var f=await this.ema(i,h),p=await this.ema(l,h),g=await this.ema(f,s),v=await this.ema(p,s);for(c=0;c<g.length;c++)u.push(g[c]/v[c]);var m=await this.ema(u,e);for(u.splice(0,u.length-m.length),c=0;c<m.length;c++)o.push([m[c],u[c]]);return o},ta.bop=async function(a,t){var n=a.map((a=>(a[3]-a[0])/(a[1]-a[2])));return t=t||14,n=await this.sma(n,t)},ta.fi=async function(a,t){for(var n=t||13,r=[],h=[],s=1;s<a.length;s++)if(r.push((a[s][0]-a[s-1][0])*a[s][1]),r.length>=n){var e=await this.ema(r,n);h.push(e[e.length-1]),r.splice(0,1)}return h},ta.asi=async function(a){for(var t=[],n=1;n<a.length;n++){var r,h=a[n][1],s=a[n-1][1],e=a[n][0],i=a[n-1][0],l=a[n][2],u=a[n-1][2],o=i-h>u-h?i-h:u-h,c=a[n][0],f=a[n-1][0],p=Math.max(a[n][0],a[n-1][0])-Math.min(a[n][2],a[n-1][2]);e-s>l-s&&e-s>e-l&&(r=e-s-(l-s)/2+(s-f)/4),l-s>e-s&&l-s>e-l&&(r=l-s-(e-s)/2+(s-f)/4),e-l>e-s&&e-l>l-s&&(r=e-l+(s-f)/4),t.push((s-h+(s-f)/2+(h-c)/2)/r*50*o/p)}return t},ta.ao=async function(a,t,n){var r=t||5,h=n||35,s=[];a=a.map((a=>(a[0]+a[1])/2)),pl=a.slice(0,h-1);for(var e=h-1;e<a.length;e++){pl.push(a[e]);var i=await this.sma(pl,r),l=await this.sma(pl,h);s.push(i[i.length-1]-l[l.length-1]),pl.splice(0,1)}return s},ta.pr=async function(a,t){for(var n=t||14,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=await Math.max.apply(null,s),i=await Math.min.apply(null,s);r.push((e-a[h-1])/(e-i)*-100)}return r},ta.lsma=async function(a,t){for(var n=t||25,r=[],h=n;h<=a.length;h++){for(var s,e,i=a.slice(h-n,h),l=0,u=0,o=0,c=0,f=1;f<=n;f++)l+=f,u+=i[f-1],o+=i[f-1]*f,c+=f*f,i[f-1],i[f-1];e=u/n-(s=(o-l*u/n)/(c-l*l/n))*l/n,r.push(s*n+e)}return r},ta.don=async function(a,t){for(var n=[],r=t||20,h=r;h<=a.length;h++){var s=a.slice(h-r,h),e=[],i=[];for(let a in s)e.push(s[a][0]),i.push(s[a][1]);var l=Math.max.apply(null,e.slice()),u=Math.min.apply(null,i.slice());n.push([l,(l+u)/2,u])}return n},ta.ichimoku=async function(a,t,n,r,h){for(var s=[],e=t||9,i=n||26,l=r||52,u=h||26,o=[],c=[],f=0;f<a.length;f++)if(s.push(a[f]),s.length>l){var p=[],g=[];for(let a in s)p.push(s[a][0]),g.push(s[a][2]);var v=(Math.max.apply(null,p.slice(p.length-1-e,p.length-1))+Math.min.apply(null,g.slice(g.length-1-e,g.length-1)))/2,m=(Math.max.apply(null,p.slice(p.length-1-i,p.length-1))+Math.min.apply(null,g.slice(g.length-1-i,g.length-1)))/2,w=a[f][1]+m,y=(Math.max.apply(null,p.slice(p.length-1-l,p.length-1))+Math.min.apply(null,g.slice(g.length-1-i,g.length-1)))/2;chik=a[f][1],c.push([v,m,w,y,chik]),s.splice(0,1)}for(f=u;f<c.length-u;f++)o.push([c[f][0],c[f][1],c[f+(u-1)][2],c[f+(u-1)][3],c[f+u-1][4]]);return o},ta.stoch=async function(a,t,n,r){var h=t||14,s=n||3,e=r||3,i=[],l=[],u=[],o=[];h<s&&([h,s]=[s,h]),e>s&&([e,s]=[s,e]);for(var c=0;c<a.length;c++){if(l.push(a[c][0]),u.push(a[c][2]),l.length>=h){var f=await Math.max.apply(null,l),p=await Math.min.apply(null,u),g=100*(a[c][1]-p)/(f-p);o.push(g)}if(e>0&&o.length>e){var v=await this.sma(o,e);o.push(v[v.length-1])}if(o.length-e>=s){var m=await this.sma(o,s);i.push([g,m[m.length-1]]),l.splice(0,1),u.splice(0,1),o.splice(0,1)}}return i},ta.atr=async function(a,t){for(var n=t||14,r=[a[0][0]-a[0][2]],h=1;h<a.length;h++){var s=await Math.max(a[h][0]-a[h-1][1],a[h][2]-a[h-1][1],a[h][0]-a[h][2]);r.push((r[r.length-1]*(n-1)+s)/n)}return r},ta.sma=async function(a,t){for(var n=t||14,r=[],h=n,s=0;h<=a.length;h++,s=0){var e=a.slice(h-n,h);for(q in e)s+=e[q];r.push(s/n)}return r},ta.smma=async function(a,t){for(var n=t||14,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=0;for(q in s)e+=s[q];r.length<=0?r.push(e/n):r.push((e-r[r.length-1])/n)}return r.splice(0,1),r},ta.wma=async function(a,t){for(var n=t||14,r=0,h=[],s=1;s<=n;s++)r+=s;for(s=n;s<=a.length;s++){var e=a.slice(s-n,s),i=0;for(q in e)i+=e[q]*(Number(q)+1)/r;h.push(i)}return h},ta.wsma=async function(a,t){for(var n=t||14,r=[],h=1/n,s=n;s<=a.length;s++)if(r.length>0)r.push((a[s-1]-r[r.length-1])*h+r[r.length-1]);else{var e=a.slice(s-n,s),i=0;for(q in e)i+=e[q];r.push(i/n)}return r},ta.pwma=async function(a,t){for(var n=0,r=[],h=[],s=t||14,e=s/2,i=t;e>=1;e--,i--)e%1!=0?n+=(e=Math.round(e))*i:(h.push(e*i),n+=e*i*2),h.unshift(e*i);for(e=s;e<=a.length;e++){for(var l=0,u=a.slice(e-s,e),o=s-1;o>=0;o--)l+=u[o]*h[o]/n;r.push(l)}return r},ta.hwma=async function(a,t){for(var n=0,r=[],h=[],s=t||14,e=1,i=s;e<=s/2;e++,i--)e%1!=0?n+=(e=Math.round(e))*i:(h.push(e*i),n+=e*i*2),h.unshift(e*i);for(e=s;e<=a.length;e++){for(var l=0,u=a.slice(e-s,e),o=s-1;o>=0;o--)l+=u[o]*h[o]/n;r.push(l)}return r},ta.vwma=async function(a,t){for(var n=t||20,r=[],h=(a=a.map((a=>[a[0]*a[1],a[1]])),n);h<=a.length;h++){for(var s=a.slice(h-n,h),e=0,i=0,l=0;l<s.length;l++)e+=s[l][1],i+=s[l][0];r.push(i/e)}return r},ta.ema=async function(a,t){for(var n=t||12,r=[],h=2/(n+1),s=n;s<=a.length;s++)if(r.length>0)r.push((a[s-1]-r[r.length-1])*h+r[r.length-1]);else{var e=a.slice(s-n,s),i=0;for(q in e)i+=e[q];r.push(i/n)}return r},ta.hull=async function(a,t){var n=t||14,r=[],h=[],s=await this.wma(a,n),e=Math.round(Math.sqrt(n)),i=await this.wma(a,Math.round(n/2));i.splice(0,i.length-s.length);for(let a in s)if(r.push(2*i[a]-s[a]),r.length>=e){var l=await this.wma(r,e);h.push(l[l.length-1])}return h},ta.kama=async function(a,t,n,r){t=t||10,n=n||2,r=r||30;for(var h=[(h=await this.sma(a,t))[h.length-1]],s=t+1;s<a.length;s++){for(var e=0,i=Math.abs(a[s]-a[s-t]),l=1;l<t;l++)e+=Math.abs(a[s-l]-a[s-l-1]);var u=(i/e*(2/(n+1)-2/(r+1)+2/(r+1)))**2;h.push(h[h.length-1]+u*(a[s]-h[h.length-1]))}return h},ta.macd=async function(a,t,n){var r=t||12,h=n||26;r>h&&([r,h]=[h,r]);var s=await this.ema(a,r),e=await this.ema(a,h),i=[];s.splice(0,h-r);for(var l=0;l<e.length;l++)i.push(s[l]-e[l]);return i},ta.bands=async function(a,t,n){for(var r=t||14,h=n||1,s=[],e=[],i=[],l=await this.sma(a,r),u=0;u<a.length;u++)if(s.push(a[u]),s.length>=r){var o=await this.std(s,r);e.push(o),s.splice(0,1)}for(u=0;u<l.length;u++)i.push([l[u]+e[u]*h,l[u],l[u]-e[u]*h]);return i},ta.bandwidth=async function(a,t,n){for(var r=t||14,h=n||1,s=[],e=await this.bands(a,r,h),i=0;i<e.length;i++)s.push((e[i][0]-e[i][2])/e[i][1]);return s},ta.keltner=async function(a,t,n){var r,h=t||14,s=n||1,e=[],i=await this.atr(a,h),l=[];for(var u in a)e.push((a[u][0]+a[u][1]+a[u][2])/3);for(r=await this.sma(e,h),i.splice(0,h-1),u=0;u<r.length;u++)l.push([r[u]+i[u]*s,r[u],r[u]-i[u]*s]);return l},ta.variance=async function(a,t){for(var n=t||a.length,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=await this.sma(s,n),i=0;for(x in s)i+=(s[x]-e[e.length-1])**2;r.push(i/n)}return r},ta.std=async function(a,t){var n=t||a.length,r=a.reduce(((a,t)=>Number(a)+Number(t)))/n;return Math.sqrt(a.reduce(((a,t)=>a+Math.pow(t-r,2)),0)/n)},ta.normsinv=async function(a){var t=-.00778489400243029,n=-.322396458041136,r=-2.40075827716184,h=-2.54973253934373,s=4.37466414146497,e=2.93816398269878,i=.00778469570904146,l=.32246712907004,u=2.445134137143,o=3.75440866190742;if(a<0||a>1)return 0;if(a<.02425)return(((((t*(c=Math.sqrt(-2*Math.log(a)))+n)*c+r)*c+h)*c+s)*c+e)/((((i*c+l)*c+u)*c+o)*c+1);if(a<=.97575){var c,f=(c=a-.5)*c;return(((((-39.6968302866538*f+220.946098424521)*f-275.928510446969)*f+138.357751867269)*f-30.6647980661472)*f+2.50662827745924)*c/(((((-54.4760987982241*f+161.585836858041)*f-155.698979859887)*f+66.8013118877197)*f-13.2806815528857)*f+1)}return-(((((t*(c=Math.sqrt(-2*Math.log(1-a)))+n)*c+r)*c+h)*c+s)*c+e)/((((i*c+l)*c+u)*c+o)*c+1)},ta.sim=async function(a,t,n,r){for(var h=[],s=(t=t||50,n=n||1e3,0);s<n;s++){for(var e=a.slice(),i=0;i<t;i++){for(var l=[],u=1;u<e.length;u++){var o=await this.dif(e[u],e[u-1]);l.push(o)}var c=await this.sma(l,l.length),f=await this.std(l),p=await this.normsinv(Math.random());e.push(e[e.length-1]*Math.exp(c[0]-f*f/2+f*p))}h.push(e)}if(!r)return h;var g=a.slice();for(s=a.length;s<h[0].length;s++)h.sort(((a,t)=>a[s]>t[s]?1:a[s]<t[s]?-1:0)),g.push(h[Math.round(h.length*r)][s]);return g},ta.cor=async function(a,t){for(var n=await this.sma(a,a.length),r=await this.sma(t,t.length),h=0,s=0,e=0,i=0;i<a.length;i++){var l=a[i]-n,u=t[i]-r;h+=l*u,s+=Math.pow(l,2),e+=Math.pow(u,2)}var o=a.length-1;return s/=o,e/=o,h/(o*(s=Math.sqrt(s))*(e=Math.sqrt(e)))},ta.dif=async function(a,t){return(a-t)/t},ta.aroon_up=async function(a,t){for(var n=t||10,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=s.slice();e.sort(((a,t)=>a-t)),r.push(100*(n-(s.findIndex((a=>a===e[n-1]))+1))/n)}return r},ta.aroon_down=async function(a,t){for(var n=t||10,r=[],h=n;h<=a.length;h++){var s=a.slice(h-n,h),e=s.slice(0);e.sort(((a,t)=>a-t)),r.push(100*(n-(s.findIndex((a=>a===e[0]))+1))/n)}return r},ta.aroon_osc=async function(a,t){for(var n=t||25,r=[],h=await this.aroon_up(a,n),s=await this.aroon_down(a,n),e=0;e<h.length;e++)r.push(h[e]-s[e]);return r},ta.mfi=async function(a,t){for(var n=t||14,r=[],h=a.map((a=>a[1])),s=a.map((a=>a[0])),e=n;e<=a.length;e++){var i=0,l=0;for(q=e-n;q<e;q++)i+=s[q],l+=h[q];r.push(100-100/(1+i/l))}return r},ta.roc=async function(a,t){for(var n=t||14,r=[],h=n;h<=a.length;h++)r.push((a[h-1]-a[h-n])/a[h-n]);return r},ta.cop=async function(a,t,n,r){t=t||11,n=n||14,r=r||10,max=Math.max(t,n),co=[];for(var h=max+r;h<a.length;h++){var s=a.slice(h-(max+r),h),e=s.slice(),i=[];s=await this.roc(s,t),e=await this.roc(e,n),s.splice(0,s.length-e.length),e.splice(0,e.length-s.length);for(var l=0;l<s.length;l++)i.push(s[l]+e[l]);i=await this.wma(i,r),co.push(i[i.length-1])}return co},ta.kst=async function(a,t,n,r,h,s,e,i,l,u){t=t||10,n=n||15,r=r||20,h=h||30,s=s||10,e=e||10,i=i||10,l=l||15,u=u||9;for(var o=[],c=[],f=Math.max(t,n,r,h)+Math.max(s,e,i,l),p=f;p<a.length;p++){var g=a.slice(p-f,p),v=await this.roc(g,t),m=await this.roc(g,n),w=await this.roc(g,r),y=await this.roc(g,h);v=await this.sma(v,s),m=await this.sma(m,e),w=await this.sma(w,i),y=await this.sma(y,l),o.push(v[v.length-1]+m[m.length-1]+w[w.length-1]+y[y.length-1])}var M=await this.sma(o,u);for(var p in o.splice(0,o.length-M.length),M)c.push([o[p],M[p]]);return c},ta.obv=async function(a){for(var t=[0],n=1;n<a.length;n++)a[n][1]>a[n-1][1]&&t.push(t[t.length-1]+a[n][0]),a[n][1]<a[n-1][1]&&t.push(t[t.length-1]-a[n][0]),a[n][1]===a[n-1][1]&&t.push(t[t.length-1]);return t},ta.vwap=async function(a,t){for(var n=!t||t>a.length?a.length:t,r=(a=a.map((a=>[a[0]*a[1],a[1]])),[]),h=n;h<=a.length;h++){for(var s=a.slice(h-n,h),e=0,i=0,l=0;l<s.length;l++)e+=s[l][1],i+=s[l][0];r.push(i/e)}return r},ta.mom=async function(a,t,n){for(var r=t||10,h=[],s=r-1;s<a.length;s++)n?h.push(a[s]/a[s-(r-1)]*100):h.push(a[s]-a[s-(r-1)]);return h},ta.mom_osc=async function(a,t){for(var n=t||9,r=[],h=n;h<a.length;h++){for(var s=0,e=0,i=1;i<n;i++)a[h-n+(i-1)]<a[h-n+i]?s+=a[h-n+i]:e+=a[h-n+i];r.push((s-e)/(s+e)*100)}return r},ta.ha=async function(a){for(var t=[[(Number(a[0][0])+Number(a[0][3]))/2,Number(a[0][1]),Number(a[0][2]),(Number(a[0][0])+Number(a[0][1])+Number(a[0][2])+Number(a[0][3]))/4]],n=1;n<a.length;n++)t.push([(t[t.length-1][0]+t[t.length-1][3])/2,Math.max(t[t.length-1][0],t[t.length-1][3],a[n][1]),Math.min(t[t.length-1][0],t[t.length-1][3],a[n][2]),(a[n][0]+a[n][1]+a[n][2]+a[n][3])/4]);return t},ta.ren=async function(a,t){for(var n=[],r=(t=t||1,Math.floor(t)===t?0:t.toString().split(".")[1].length||0),h=Math.ceil(a[0][0]/t*10**r)/10**r*t,s=h-t,e=1;e<a.length;e++){if(a[e][0]>h+t)do{n.push([h,h+t,h,h+t]),h+=t,s+=t}while(a[e][0]>h+t);if(a[e][1]<s-t)do{n.push([s,s,s-t,s-t]),h-=t,s-=t}while(a[e][1]<s-t)}return n};try{module.exports=exports=ta}catch(a){}